{"mappings":"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","sources":["node_modules/@swc/helpers/src/_create_class.js","node_modules/@swc/helpers/src/_array_like_to_array.js","node_modules/@swc/helpers/src/_to_consumable_array.js","node_modules/@swc/helpers/src/_array_without_holes.js","node_modules/@swc/helpers/src/_iterable_to_array.js","node_modules/@swc/helpers/src/_unsupported_iterable_to_array.js","node_modules/@swc/helpers/src/_non_iterable_spread.js","src/game.ts","node_modules/@swc/helpers/src/_define_property.js","src/game-ui.ts","src/index.ts","node_modules/@swc/helpers/src/_class_call_check.js"],"sourcesContent":["function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\n","import arrayWithoutHoles from './_array_without_holes';\nimport iterableToArray from './_iterable_to_array';\nimport nonIterableSpread from './_non_iterable_spread';\nimport unsupportedIterableToArray from './_unsupported_iterable_to_array';\n\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n","import _arrayLikeToArray from './_array_like_to_array';\n\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n","import _arrayLikeToArray from './_array_like_to_array';\n\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n    return _arrayLikeToArray(o, minLen);\n}\n","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n","export enum PlayResult {\n  SUCCESS = \"success\",\n  FAILURE = \"failure\",\n  PENDING = \"pending\",\n  GAMEOVER = \"game-over\",\n}\n\ntype Play = {\n  card: number;\n  result: PlayResult.PENDING | PlayResult.SUCCESS | PlayResult.FAILURE;\n  time: Date;\n};\n\nexport class Game {\n  public static generateRandomNumbers = generateRandomNumbers;\n  private readonly initalValues: number[];\n  private readonly solvedValues: number[];\n  public readonly cards: number[];\n  public readonly playHistory: Play[];\n\n  constructor(values: number[]) {\n    this.initalValues = values;\n    this.solvedValues = [];\n\n    this.cards = this.doubleAndShuffle(values);\n    this.playHistory = [];\n  }\n\n  public cardSelected(card: number): PlayResult {\n    if (card === undefined || card === null)\n      throw new Error(\"Card is not defined.\");\n    if (this.isCardNotPartGame(card))\n      throw new Error(\"This card is not part of the current game.\");\n    if (this.isCardSolved(card))\n      throw new Error(\"This card has already been solved.\");\n\n    const lastPlay = this.playHistory[this.playHistory.length - 1];\n    console.debug(\"last play\", lastPlay);\n\n    let result: PlayResult;\n    if (!lastPlay || lastPlay.result !== PlayResult.PENDING) {\n      result = PlayResult.PENDING;\n    } else {\n      result = lastPlay.card === card ? PlayResult.SUCCESS : PlayResult.FAILURE;\n    }\n\n    const currentPlay = {\n      card,\n      result,\n      time: new Date(),\n    };\n    this.playHistory.push(currentPlay);\n    console.debug(\"current play\", currentPlay);\n\n    if (result === PlayResult.SUCCESS) {\n      this.solvedValues.push(card);\n      if (this.isGameEnded()) return PlayResult.GAMEOVER;\n    }\n\n    return result;\n  }\n\n  private isCardNotPartGame(card: number) {\n    return !this.initalValues.includes(card);\n  }\n\n  private isCardSolved(card: number) {\n    const lengthInInital = this.initalValues.filter(\n      (value) => value === card\n    ).length;\n\n    const lengthInSolved = this.solvedValues.filter(\n      (value) => value === card\n    ).length;\n\n    return lengthInSolved === lengthInInital;\n  }\n\n  private isGameEnded() {\n    return this.solvedValues.length === this.initalValues.length;\n  }\n\n  private doubleAndShuffle(values: any[]) {\n    const doubled = [...values, ...values];\n    const shuffled = doubled.sort(() => Math.random() - 0.5);\n    return shuffled;\n  }\n}\n\n/**\n * @param numberOfNumbers How many random numbers to generate.\n * @param minNumber The min number (inclusive) that can be returned.\n * @param maxNumber The max number (exclusive) that can be returned.\n */\nfunction generateRandomNumbers(\n  numberOfNumbers: number,\n  minNumber: number = 0,\n  maxNumber: number = 101\n) {\n  const numbers = [];\n  while (numbers.length < numberOfNumbers) {\n    numbers.push(getFlooredRandom(minNumber, maxNumber));\n  }\n  return numbers;\n}\n\nfunction getFlooredRandom(min: number, max: number) {\n  const arbitraryRandom = Math.random() * (max - min) + min;\n  return Math.floor(arbitraryRandom);\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","import { Game, PlayResult } from \"./game\";\n\nexport function createCardElements(game: Game) {\n  const cardElements = game.cards.map((card) =>\n    createCard(card, (event: Event) => handleCardClicked(event, game))\n  );\n\n  return cardElements;\n}\n\nfunction createCard(card: number, clickHandler: EventListener) {\n  const cardElement = createElementWithClass(\"button\", [\"card\"]);\n  cardElement.addEventListener(\"click\", clickHandler, true);\n  const cardInner = createElementWithClass(\"div\", [\"card-inner\"]);\n  const cardFront = createElementWithClass(\"div\", [\"card-front\"]);\n  const cardBack = createElementWithClass(\"div\", [\"card-back\"]);\n  const h2 = createElementWithTextNode(\"h2\", card.toString());\n\n  cardBack.appendChild(h2);\n  cardInner.appendChild(cardFront);\n  cardInner.appendChild(cardBack);\n  cardElement.appendChild(cardInner);\n\n  return cardElement;\n}\n\nfunction createElementWithClass(elementType: string, classes: string[]) {\n  const element = document.createElement(elementType);\n  element.classList.add(...classes);\n  return element;\n}\n\nfunction createElementWithTextNode(elementType: string, text: string) {\n  const element = document.createElement(elementType);\n  const textNode = document.createTextNode(text);\n  element.appendChild(textNode);\n  return element;\n}\n\nlet currentPendingElement: HTMLButtonElement | undefined;\nfunction handleCardClicked(event: Event, game: Game) {\n  const cardElement = event.currentTarget as HTMLButtonElement;\n\n  cardElement.disabled = true;\n  cardElement.classList.add(\"selected\");\n\n  const bothCards = [cardElement, currentPendingElement];\n\n  const card = Number(cardElement.innerText.trim());\n  const result = game.cardSelected(card);\n\n  switch (result) {\n    case PlayResult.PENDING:\n      currentPendingElement = cardElement;\n      break;\n    case PlayResult.FAILURE:\n      addClass(\"failure\", bothCards);\n      resetButtonAfterDelay(bothCards);\n      break;\n\n    case PlayResult.GAMEOVER:\n      alertOnGameEnd();\n    //Game over also triggers the success secion.\n    case PlayResult.SUCCESS:\n      addClass(\"success\", bothCards);\n      removeClass(\"failure\", bothCards);\n      break;\n    default:\n      console.error(\"Unknown play result in click handler.\");\n      break;\n  }\n}\n\nfunction addClass(className: string, elements: Array<HTMLElement | undefined>) {\n  for (const element of elements) {\n    element?.classList.add(className);\n  }\n}\n\nfunction removeClass(\n  className: string,\n  elements: Array<HTMLElement | undefined>\n) {\n  for (const element of elements) {\n    element?.classList.remove(className);\n  }\n}\n\nfunction resetButtonAfterDelay(cards: Array<HTMLButtonElement | undefined>) {\n  window.setTimeout(function () {\n    removeClass(\"selected\", cards);\n    removeClass(\"failure\", cards);\n    for (const card of cards) {\n      if (card) card.disabled = false;\n    }\n  }, 1000);\n}\n\nfunction alertOnGameEnd() {\n  window.setTimeout(() => {\n    const reloadGame = confirm(\"Restart the game?\");\n    if (reloadGame) location.reload();\n  }, 500);\n}\n","import { Game } from \"./game\";\nimport { createCardElements } from \"./game-ui\";\n\nconst NUMBERS_IN_PLAY = 5;\n\nconst game = new Game(Game.generateRandomNumbers(NUMBERS_IN_PLAY));\n\nconst cards = createCardElements(game);\n\nconst cardsContainer = document.getElementById(\"cards-container\");\nif (!cardsContainer) throw Error(\"Cannot find cards container.\");\n\ncardsContainer.append(...cards);\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}"],"names":["$e5f9bd0c37e9914c$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","$a735c72dc00321c4$export$2e2bcd8739ae039","arr","len","arr2","Array","$44ff19cc49d55455$export$2e2bcd8739ae039","isArray","$c0e5c3a46846db0d$export$2e2bcd8739ae039","iter","Symbol","iterator","from","$8664303016091545$export$2e2bcd8739ae039","o","minLen","n","prototype","toString","call","slice","constructor","name","test","$09f7b49357d6407d$export$2e2bcd8739ae039","TypeError","$9a10eb5a4ae3d243$export$2e2bcd8739ae039","$cdeee832ce47ff31$export$b9cef6d9969efb6d","obj","value","$b54112ba3d8c5c2b$var$currentPendingElement","_cardsContainer","$cdeee832ce47ff31$export$985739bfa5723e08","values","instance","Constructor","this","initalValues","solvedValues","cards","doubleAndShuffle","playHistory","protoProps","staticProps","card","Error","isCardNotPartGame","isCardSolved","result","lastPlay","console","debug","currentPlay","PENDING","SUCCESS","FAILURE","time","Date","push","isGameEnded","GAMEOVER","includes","lengthInInital","filter","concat","sort","Math","random","$cdeee832ce47ff31$var$getFlooredRandom","min","max","arbitraryRandom","floor","$b54112ba3d8c5c2b$var$createElementWithClass","elementType","classes","_classList","element","document","createElement","classList","add","apply","$b54112ba3d8c5c2b$var$addClass","className","elements","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","next","done","err","return","$b54112ba3d8c5c2b$var$removeClass","remove","numberOfNumbers","minNumber","arguments","maxNumber","numbers","game","cardElements","$2d081a1fa49e40a2$var$game","generateRandomNumbers","$2d081a1fa49e40a2$var$cards","map","clickHandler","cardElement","addEventListener","text","textNode","cardInner","cardFront","cardBack","h2","createTextNode","appendChild","$b54112ba3d8c5c2b$var$createCard","event","currentTarget","disabled","bothCards","Number","innerText","trim","cardSelected","window","setTimeout","confirm","location","reload","error","$b54112ba3d8c5c2b$var$handleCardClicked","$2d081a1fa49e40a2$var$cardsContainer","getElementById","append"],"version":3,"file":"index.893ce2c4.js.map"}